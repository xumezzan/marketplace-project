{% load static i18n %}

<div class="bg-white dark:bg-slate-800 rounded-2xl shadow-sm border border-slate-200 dark:border-slate-700 p-6"
    id="booking-calendar-component">
    <h3 class="text-lg font-bold text-slate-900 dark:text-white mb-4">Выберите время</h3>

    <!-- Calendar Header -->
    <div class="flex items-center justify-between mb-6">
        <button type="button" id="prevMonth"
            class="p-2 hover:bg-slate-100 dark:hover:bg-slate-700 rounded-full transition">
            <i class="bi bi-chevron-left"></i>
        </button>
        <h4 id="currentMonthYear" class="text-base font-semibold text-slate-900 dark:text-white capitalize"></h4>
        <button type="button" id="nextMonth"
            class="p-2 hover:bg-slate-100 dark:hover:bg-slate-700 rounded-full transition">
            <i class="bi bi-chevron-right"></i>
        </button>
    </div>

    <!-- Calendar Grid -->
    <div class="grid grid-cols-7 gap-1 mb-2 text-center">
        <div class="text-xs font-medium text-slate-500 dark:text-slate-400 py-2">Пн</div>
        <div class="text-xs font-medium text-slate-500 dark:text-slate-400 py-2">Вт</div>
        <div class="text-xs font-medium text-slate-500 dark:text-slate-400 py-2">Ср</div>
        <div class="text-xs font-medium text-slate-500 dark:text-slate-400 py-2">Чт</div>
        <div class="text-xs font-medium text-slate-500 dark:text-slate-400 py-2">Пт</div>
        <div class="text-xs font-medium text-slate-500 dark:text-slate-400 py-2">Сб</div>
        <div class="text-xs font-medium text-slate-500 dark:text-slate-400 py-2">Вс</div>
    </div>
    <div id="calendarDays" class="grid grid-cols-7 gap-1 mb-6">
        <!-- Days will be injected here -->
    </div>

    <!-- Time Slots -->
    <div id="timeSlotsContainer" class="hidden">
        <h4 class="text-sm font-medium text-slate-900 dark:text-white mb-3">
            Доступное время на <span id="selectedDateDisplay"></span>
        </h4>
        <div id="timeSlotsGrid" class="grid grid-cols-3 gap-2">
            <!-- Slots will be injected here -->
        </div>
    </div>

    <!-- Loading State -->
    <div id="calendarLoading" class="hidden flex justify-center py-8">
        <div class="animate-spin rounded-full h-8 w-8 border-b-2 border-indigo-600"></div>
    </div>

    <!-- Hidden Inputs -->
    <input type="hidden" id="selectedDate" name="scheduled_date">
    <input type="hidden" id="selectedTime" name="scheduled_time">
</div>

<script>
    const specialistId = {{ specialist.id|default: "null" }};
</script>
<script src="{% static 'js/availability-calendar.js' %}?v=1"></script>